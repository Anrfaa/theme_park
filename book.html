<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Theme Park Booking System</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      padding: 30px;
    }

    .section-bookyourticket {
      max-width: 750px;
      background: white;
      margin: 50px auto;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 0 10px #90caf9;
    }

    .section-bookyourticket h2 {
      text-align: center;
      color: #1565c0;
    }

    .section-bookyourticket label {
      font-weight: bold;
    }

    .section-bookyourticket input,
    .section-bookyourticket select,
    .section-bookyourticket button {
      width: 100%;
      padding: 10px;
      margin: 8px 0 20px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 14px;
    }

    .section-bookyourticket button {
      background-color: #1976d2;
      color: white;
      border: none;
      font-size: 16px;
    }

    .section-bookyourticket button:hover {
      background-color: #0d47a1;
    }

    .price-display {
      background: #f1f1f1;
      padding: 10px;
      border-radius: 5px;
      margin-top: 10px;
    }

    .promo-feedback {
      color: green;
    }

    .promo-error {
      color: red;
    }

    .availability {
      font-weight: bold;
      padding: 10px;
      border-radius: 5px;
      margin-top: -10px;
    }

    .available {
      background-color: #d4edda;
      color: #155724;
    }

    .almost-full {
      background-color: #fff3cd;
      color: #856404;
    }

    .full {
      background-color: #f8d7da;
      color: #721c24;
    }
  </style>
</head>
<body>
    <button class="sidebar-toggle-btn" id="sidebarToggle" aria-label="Open sidebar">&#9776;</button>
    <nav class="sidebar" id="sidebar">
    <button class="sidebar-close" id="sidebarClose" aria-label="Close sidebar">&times;</button>
    <ul style="margin-top: 40px;">
        <li><a href="index.html">üè† Home</a></li>
        <li>
        <a href="ride.html">üé¢ Rides</a>
        <ul class="sidebar-submenu">
            <li><a href="ride.html#category1">Category 1</a></li>
            <li><a href="ride.html#category2">Category 2</a></li>
            <li><a href="ride.html#category3">Category 3</a></li>
        </ul>
        </li>
        <li>
        <a href="packages.html">üéü Packages</a>
        <ul class="sidebar-submenu">
            <li><a href="packages.html#offer1">Offer 1</a></li>
            <li><a href="packages.html#offer2">Offer 2</a></li>
        </ul>
        </li>
        <li><a href="plan_your_visit.html">üó∫ Plan Your Visit</a></li>
        <li><a href="#book.html">üé´ Book Your Tickets</a></li>
        <li><a href="contact.html">üìû Contact & Support</a></li>
    </ul>
    <div class="sidebar-bottom">
        <a href="#login.html" class="sidebar-bottom-link">Log In</a>
        <a href="#register.html" class="sidebar-bottom-link">Create Account</a>
    </div>
    </nav>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    
  <iframe src="components/navbar.html" class="navbar-frame" title="Navigation Bar"></iframe>

  <main class="section-container section-bookyourticket">
    <h2 id="formTitle">Book Your Theme Park Ticket</h2>
    <form action="thankyou.html" method="post">
      <label for="languageSelect">üåê Language / Bahasa / ËØ≠Ë®Ä</label>
      <select id="languageSelect" onchange="changeLanguage()">
        <option value="en">English</option>
        <option value="bm">Bahasa Melayu</option>
        <option value="zh">‰∏≠Êñá</option>
      </select>

      <label for="fullname" id="labelName">Full Name:</label>
      <input type="text" id="fullname" name="fullname" required>

      <label for="email" id="labelEmail">Email Address:</label>
      <input type="email" id="email" name="email" required>

      <label for="themepark" id="labelThemePark">Select Theme Park:</label>
      <select id="themepark" name="themepark">
        <option value="splash">Splash Mania</option>
        <option value="escape">Escape Penang</option>
        <option value="genting">Genting Skyworld</option>
        <option value="sunway">Sunway Lagoon</option>
      </select>

      <label for="ticket" id="labelTicket">Ticket Type:</label>
      <select id="ticket" name="ticket" onchange="updateTotal()">
        <option value="50">Adult - RM50</option>
        <option value="30">Child - RM30</option>
        <option value="40">Senior - RM40</option>
      </select>

      <label for="addons" id="labelAddons">Add-Ons:</label>
      <label><input type="checkbox" class="addon" value="10" onchange="updateTotal()"> Meal Package (RM10)</label>
      <label><input type="checkbox" class="addon" value="5" onchange="updateTotal()"> Locker Rental (RM5)</label>
      <label><input type="checkbox" class="addon" value="20" onchange="updateTotal()"> Express Pass (RM20)</label>

      <label for="time-slot" id="labelTime">Select Time Slot:</label>
      <select id="time-slot" name="time-slot" required onchange="checkAvailability()">
        <option value="">-- Please choose a time slot --</option>
        <option value="morning">Morning (9:00 AM ‚Äì 12:00 PM)</option>
        <option value="afternoon">Afternoon (12:00 PM ‚Äì 4:00 PM)</option>
        <option value="evening">Evening (4:00 PM ‚Äì 8:00 PM)</option>
      </select>

      <label for="date" id="labelDate">Visit Date:</label>
      <input type="date" id="date" name="date" required onchange="checkAvailability()">
      <div id="availabilityStatus" class="availability"></div>

      <label for="payment-method" id="labelPayment">Payment Method:</label>
      <select id="payment-method" name="payment-method" required>
        <option value="">-- Select Payment Method --</option>
        <option value="credit-card">Credit/Debit Card</option>
        <option value="online-banking">Online Banking</option>
        <option value="ewallet">E-Wallet (Touch 'n Go, GrabPay, etc.)</option>
      </select>

      <label for="promoCode">Promo Code:</label>
      <input type="text" id="promoCode" placeholder="e.g. SAVE10">
      <button type="button" onclick="applyPromo()">Apply Promo</button>
      <div id="promoMessage"></div>

      <div class="price-display">
        <strong>Original Price: RM<span id="originalTotal">50</span></strong><br>
        <strong>Discount: RM<span id="discount">0</span></strong><br>
        <strong>Final Price: RM<span id="newTotal">50</span></strong>
      </div>

      <button type="submit" id="submitBtn">Book Now</button>
    </form>
  </main>

  <iframe src="components/footer.html" class="footer-frame" title="Footer"></iframe>

  <script>
    let discount = 0;
    function updateTotal() {
      const ticketPrice = parseFloat(document.getElementById("ticket").value);
      const addons = document.querySelectorAll(".addon:checked");
      let addonsTotal = 0;
      addons.forEach(addon => addonsTotal += parseFloat(addon.value));
      const finalPrice = ticketPrice + addonsTotal - discount;
      document.getElementById("originalTotal").innerText = (ticketPrice + addonsTotal).toFixed(2);
      document.getElementById("newTotal").innerText = finalPrice >= 0 ? finalPrice.toFixed(2) : "0.00";
    }

    function applyPromo() {
      const code = document.getElementById("promoCode").value.trim().toUpperCase();
      const total = parseFloat(document.getElementById("originalTotal").innerText);
      if (code === "SAVE10") {
        discount = 10;
        showPromo("Promo code applied: RM10 discount.", true);
      } else if (code === "HALF50") {
        discount = total * 0.5;
        showPromo("Promo code applied: 50% discount.", true);
      } else {
        discount = 0;
        showPromo("Invalid promo code.", false);
      }
      document.getElementById("discount").innerText = discount.toFixed(2);
      updateTotal();
    }

    function showPromo(msg, isSuccess) {
      const el = document.getElementById("promoMessage");
      el.innerHTML = `<span class="${isSuccess ? 'promo-feedback' : 'promo-error'}">${msg}</span>`;
    }

    function checkAvailability() {
      const date = document.getElementById("date").value;
      const timeSlot = document.getElementById("time-slot").value;
      const statusBox = document.getElementById("availabilityStatus");
      const demoAvailability = {
        "2025-07-01": { morning: "available", afternoon: "almost", evening: "full" },
        "2025-07-02": { morning: "full", afternoon: "available", evening: "almost" }
      };
      const status = (demoAvailability[date] && demoAvailability[date][timeSlot]) || "available";
      const statusMap = {
        available: ["‚úÖ Available", "available"],
        almost: ["‚ö†Ô∏è Almost Full", "almost-full"],
        full: ["‚ùå Fully Booked", "full"]
      };
      statusBox.innerHTML = statusMap[status][0];
      statusBox.className = `availability ${statusMap[status][1]}`;
    }

    const translations = {
      en: {
        formTitle: "Book Your Theme Park Ticket",
        labelName: "Full Name:",
        labelEmail: "Email Address:",
        labelThemePark: "Select Theme Park:",
        labelTicket: "Ticket Type:",
        labelAddons: "Add-Ons:",
        labelTime: "Select Time Slot:",
        labelDate: "Visit Date:",
        labelPayment: "Payment Method:",
        submitBtn: "Book Now"
      },
      bm: {
        formTitle: "Tempah Tiket Taman Tema Anda",
        labelName: "Nama Penuh:",
        labelEmail: "Alamat Emel:",
        labelThemePark: "Pilih Taman Tema:",
        labelTicket: "Jenis Tiket:",
        labelAddons: "Tambahan Pilihan:",
        labelTime: "Pilih Masa Lawatan:",
        labelDate: "Tarikh Lawatan:",
        labelPayment: "Kaedah Pembayaran:",
        submitBtn: "Tempah Sekarang"
      },
      zh: {
        formTitle: "È¢ÑËÆ¢‰∏ªÈ¢òÂÖ¨Âõ≠Èó®Á•®",
        labelName: "ÂÖ®ÂêçÔºö",
        labelEmail: "ÁîµÂ≠êÈÇÆ‰ª∂Âú∞ÂùÄÔºö",
        labelThemePark: "ÈÄâÊã©‰∏ªÈ¢òÂÖ¨Âõ≠Ôºö",
        labelTicket: "Á•®ÁßçÔºö",
        labelAddons: "ÈôÑÂä†ÈÄâÈ°πÔºö",
        labelTime: "ÈÄâÊã©Êó∂Èó¥ÊÆµÔºö",
        labelDate: "ÂèÇËßÇÊó•ÊúüÔºö",
        labelPayment: "‰ªòÊ¨æÊñπÂºèÔºö",
        submitBtn: "Á´ãÂç≥È¢ÑËÆ¢"
      }
    };

    function changeLanguage() {
      const lang = document.getElementById("languageSelect").value;
      const t = translations[lang];
      document.getElementById("formTitle").innerText = t.formTitle;
      document.getElementById("labelName").innerText = t.labelName;
      document.getElementById("labelEmail").innerText = t.labelEmail;
      document.getElementById("labelThemePark").innerText = t.labelThemePark;
      document.getElementById("labelTicket").innerText = t.labelTicket;
      document.getElementById("labelAddons").innerText = t.labelAddons;
      document.getElementById("labelTime").innerText = t.labelTime;
      document.getElementById("labelDate").innerText = t.labelDate;
      document.getElementById("labelPayment").innerText = t.labelPayment;
      document.getElementById("submitBtn").innerText = t.submitBtn;
    }
  </script>
  <script>
            // Sidebar open/close logic
            const sidebar = document.getElementById('sidebar');
            const sidebarToggle = document.getElementById('sidebarToggle');
            const sidebarClose = document.getElementById('sidebarClose');
            const sidebarOverlay = document.getElementById('sidebarOverlay');

            function openSidebar() {
                sidebar.classList.add('open');
                sidebarOverlay.style.display = 'block';
            }
            function closeSidebar() {
                sidebar.classList.remove('open');
                sidebarOverlay.style.display = 'none';
            }

            sidebarToggle.addEventListener('click', openSidebar);
            sidebarClose.addEventListener('click', closeSidebar);
            sidebarOverlay.addEventListener('click', closeSidebar);

            // Optional: Close sidebar with ESC key
            document.addEventListener('keydown', function(e) {
                if (e.key === "Escape") closeSidebar();
            });
        </script>
</body>
</html>